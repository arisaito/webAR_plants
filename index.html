<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="style.css" />
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
    <!-- aframe snow component -->
    <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>

    <title>untitled</title>
  </head>
  <body>
    <audio src="src/audio/ bubble.mp3" autoplay loop></audio>
    <a-scene vr-mode-ui="enabled:false">
      <a-assets>
        <a-asset-item id="mone-obj" src="src/mone.obj"></a-asset-item>
        <a-asset-item id="mone-mtl" src="src/mone.mtl"></a-asset-item>
      </a-assets>

      <!-- snow component -->
      <a-entity
        position="0 1 0"
        particle-system="preset: snow;
                         particleCount: 5000;
                         size: 2;"
      >
      </a-entity>

      <!-- <a-entity random-position="min: -5 -5 -5; max: 5 5 5" random-rotation scale="1 1 1"> -->
      <!-- <a-obj-model id="mone-3D" src="#mone-obj" mtl="#mone-mtl"></a-obj-model> -->
      <a-entity
        id="wrapper"
        position="0 0 0"
        rotation="0 0 0"
        scale="1 1 1"
        visible="true"
      ></a-entity>

      <!-- cube 自動生成 -->
      <a-entity
        id="cubeWrapper"
        position="-15 -15 -15"
        rotation="0 0 0"
        scale="1 1 1"
        visible="true"
      >
      </a-entity>
    </a-scene>
    <!-- <script src="loading.js"></script> -->
    <script>
      window.onload = function() {
        function randomNum(min, max) {
          return Math.floor(Math.random() * (max + min + 1)) + min;
        }

        var fragment = document.createDocumentFragment();
        var scene = document.querySelector("a-scene");
        var wrapper = document.querySelector("#cubeWrapper");
        for (var i = 0; i < 100; i++) {
          console.log("instansiate");
          var box = document.createElement("a-box");
          box.setAttribute("position", {
            x: randomNum(0, 30),
            y: randomNum(0, 30),
            z: randomNum(0, 30)
          });
          box.setAttribute("scale", { x: 1, y: 1, z: 1 });
          fragment.appendChild(box);
        }
        wrapper.appendChild(fragment);
      };
    </script>
  </body>
</html>
